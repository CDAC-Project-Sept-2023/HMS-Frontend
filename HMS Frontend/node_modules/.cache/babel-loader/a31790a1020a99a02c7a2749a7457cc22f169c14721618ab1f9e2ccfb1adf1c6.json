{"ast":null,"code":"import axios from 'axios';\nimport { createUrl, log } from '../utils/utils';\nimport { toast } from 'react-toastify';\nexport async function registerUser(name, email, password, contactNo, age, bloodGroup, address, role) {\n  const url = createUrl('/patient/register');\n  const body = {\n    name,\n    email,\n    password,\n    contactNo,\n    age,\n    bloodGroup,\n    address,\n    role\n  };\n  try {\n    // Check if the user already exists by email\n    // try {\n    //   const getUserResponse = await axios.get(url);\n    //   debugger;\n    //   if (getUserResponse.data && getUserResponse.data.email === email) {\n    //     console.log(getUserResponse.data);\n    //     return { email: '' }; // Return an empty object to indicate existing email\n    //   }\n    //   if(getUserResponse.data && getUserResponse.data.role === 'Patient'){\n    //     return {userRoles : 'Patient'}\n    //   }\n    //   else if (getUserResponse.data && getUserResponse.data.userRoles === 'Admin'){\n    //     return {userRoles : 'Admin'}\n    //   }\n    //   else if (getUserResponse.data && getUserResponse.data.userRoles === 'Doctor'){\n    //     return {userRoles : 'Doctor'}\n    //   }\n    // } catch (getUserEx) {\n    //    log('Error fetching user data by email:', getUserEx);\n    // }\n\n    // Proceed with registration if the email is not found in the database\n    debugger;\n    const response = await axios.post(url, body);\n    log(response.data);\n    return response.data;\n  } catch (ex) {\n    log('Error registering user:', ex);\n    return null;\n  }\n}\nexport async function loginUser(email, password) {\n  //const url = createUrl('/auth/signin')\n  const url = createUrl('/authenticate/login');\n  const body = {\n    email,\n    password\n  };\n\n  // wait till axios is making the api call and getting response from server\n  try {\n    const response = await axios.post(url, body);\n    log(response.data);\n    debugger;\n    const token = response.data.jwt;\n    const userRoles = response.data.userRoles;\n    const userId = response.data.userId;\n    const isLoggedIn = response.data.isLoggedIn; //true;\n\n    debugger;\n    sessionStorage.setItem(\"token\", token);\n    sessionStorage.setItem(\"userRoles\", userRoles);\n    sessionStorage.setItem(\"userId\", userId);\n    sessionStorage.setItem(\"isLoggedIn\", isLoggedIn);\n    console.log(sessionStorage.getItem(\"userId\"));\n    return response;\n  } catch (ex) {\n    log(ex);\n    return null;\n  }\n}\nexport async function getPatientById(patientId) {\n  const url = createUrl(`/patient/${patientId}`);\n  debugger;\n  // const body = {\n  //   patientId\n  // }\n  // wait till axios is making the api call and getting response from server\n  try {\n    const response = await axios.get(url);\n    log(response.data);\n    debugger;\n    const token = response.data.password;\n    const userRoles = response.data.role;\n    const userId = response.data.userId;\n    const isLoggedIn = true; //response.data.isLoggedIn;\n\n    sessionStorage.setItem(\"token\", token);\n    sessionStorage.setItem(\"userRoles\", userRoles);\n    sessionStorage.setItem(\"userId\", userId);\n    sessionStorage.setItem(\"isLoggedIn\", isLoggedIn);\n    return response.data;\n  } catch (ex) {\n    log(ex);\n    return null;\n  }\n}\n\n/////////omkar fun ////\n\nexport async function getDoctorById(doctorId) {\n  const url = createUrl(`/doctor/${doctorId}`);\n  debugger;\n  try {\n    const response = await axios.get(url);\n    log(response.data);\n    debugger;\n    return response.data;\n  } catch (ex) {\n    log(ex);\n    return null;\n  }\n}\nexport async function getAdminById(adminId) {\n  const url = createUrl(`/admin/${adminId}`);\n  debugger;\n  try {\n    const response = await axios.get(url);\n    log(response.data);\n    debugger;\n    return response.data;\n  } catch (ex) {\n    log(ex);\n    return null;\n  }\n}\nexport async function getAllPatients() {\n  const url = createUrl(`/patient`);\n  debugger;\n  try {\n    const response = await axios.get(url);\n    log(response.data);\n    debugger;\n    return response.data;\n  } catch (ex) {\n    log(ex);\n    return null;\n  }\n}\nexport async function updateStatusOfPatient(patientId) {\n  const url = createUrl(`/patient/status/patientId/${patientId}`);\n  debugger;\n  try {\n    const response = await axios.put(url);\n    log(response.data);\n    if (response.data) {\n      // ShowMessage(\"Record Updated!\");\n      debugger;\n      console.log(\"hi\");\n      toast.success(\"Patient Deleted Successfully\");\n    } else {\n      toast.error(\"An error occurred during getting response \");\n    }\n  } catch (ex) {\n    log(ex);\n    return null;\n  }\n}\nexport async function registerDoctor(doctor) {\n  const url = createUrl('/doctor/register');\n  // const body = {\n  //   doctor\n  // };\n\n  try {\n    debugger;\n    const response = await axios.post(url, doctor);\n    log(response.data);\n    return response.data;\n  } catch (ex) {\n    log('Error registering user:', ex);\n    return null;\n  }\n}\nexport async function updateStatusOfDoctors(doctorId) {\n  const url = createUrl(`/doctor/${doctorId}`);\n  debugger;\n  try {\n    const response = await axios.put(url);\n    log(response.data);\n    if (response.data) {\n      // ShowMessage(\"Record Updated!\");\n      debugger;\n      console.log(\"hi\");\n      toast.success(\"Doctor Removed Successfully\");\n    } else {\n      toast.error(\"An error occurred during getting response \");\n    }\n  } catch (ex) {\n    log(ex);\n    return null;\n  }\n}","map":{"version":3,"names":["axios","createUrl","log","toast","registerUser","name","email","password","contactNo","age","bloodGroup","address","role","url","body","response","post","data","ex","loginUser","token","jwt","userRoles","userId","isLoggedIn","sessionStorage","setItem","console","getItem","getPatientById","patientId","get","getDoctorById","doctorId","getAdminById","adminId","getAllPatients","updateStatusOfPatient","put","success","error","registerDoctor","doctor","updateStatusOfDoctors"],"sources":["C:/Users/MAYUR GADEKAR/Desktop/HMS Frontend Git/HMS Frontend/src/services/user.js"],"sourcesContent":["import axios from 'axios';\r\nimport { createUrl, log } from '../utils/utils';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport async function registerUser(\r\n  name,\r\n  email,\r\n  password,\r\n  contactNo,\r\n  age,\r\n  bloodGroup,\r\n  address,\r\n  role\r\n) {\r\n  const url = createUrl('/patient/register');\r\n  const body = {\r\n    name,\r\n    email,\r\n    password,\r\n    contactNo,\r\n    age,\r\n    bloodGroup,\r\n    address,\r\n    role\r\n  };\r\n\r\n  try {\r\n   // Check if the user already exists by email\r\n    // try {\r\n    //   const getUserResponse = await axios.get(url);\r\n    //   debugger;\r\n    //   if (getUserResponse.data && getUserResponse.data.email === email) {\r\n    //     console.log(getUserResponse.data);\r\n    //     return { email: '' }; // Return an empty object to indicate existing email\r\n    //   }\r\n    //   if(getUserResponse.data && getUserResponse.data.role === 'Patient'){\r\n    //     return {userRoles : 'Patient'}\r\n    //   }\r\n    //   else if (getUserResponse.data && getUserResponse.data.userRoles === 'Admin'){\r\n    //     return {userRoles : 'Admin'}\r\n    //   }\r\n    //   else if (getUserResponse.data && getUserResponse.data.userRoles === 'Doctor'){\r\n    //     return {userRoles : 'Doctor'}\r\n    //   }\r\n    // } catch (getUserEx) {\r\n    //    log('Error fetching user data by email:', getUserEx);\r\n    // }\r\n\r\n    // Proceed with registration if the email is not found in the database\r\n    debugger;\r\n    const response = await axios.post(url, body);\r\n    log(response.data);\r\n    return response.data;\r\n  } catch (ex) {\r\n    log('Error registering user:', ex);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function loginUser(email, password) {\r\n  //const url = createUrl('/auth/signin')\r\n  const url = createUrl('/authenticate/login')\r\n  const body = {\r\n    email,\r\n    password,\r\n  }\r\n\r\n  // wait till axios is making the api call and getting response from server\r\n  try {\r\n    const response = await axios.post(url, body)\r\n    log(response.data)\r\n    debugger; \r\n    const token = response.data.jwt;\r\n    const userRoles = response.data.userRoles;\r\n    const userId = response.data.userId;\r\n    const isLoggedIn = response.data.isLoggedIn; //true;\r\n\r\n    debugger;\r\n    sessionStorage.setItem(\"token\" , token);\r\n    sessionStorage.setItem(\"userRoles\", userRoles);\r\n    sessionStorage.setItem(\"userId\", userId);\r\n    sessionStorage.setItem(\"isLoggedIn\", isLoggedIn);\r\n    console.log(sessionStorage.getItem(\"userId\"));\r\n    return response\r\n  } catch (ex) {\r\n    log(ex)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function getPatientById(patientId){\r\n\r\n  const url = createUrl(`/patient/${patientId}`)\r\ndebugger;\r\n  // const body = {\r\n  //   patientId\r\n  // }\r\n  // wait till axios is making the api call and getting response from server\r\n  try {\r\n    const response = await axios.get(url)\r\n    log(response.data)\r\n    debugger; \r\n    const token = response.data.password;\r\n    const userRoles = response.data.role;\r\n    const userId = response.data.userId;\r\n    const isLoggedIn = true;//response.data.isLoggedIn;\r\n\r\n    sessionStorage.setItem(\"token\" , token);\r\n    sessionStorage.setItem(\"userRoles\",userRoles) ;\r\n    sessionStorage.setItem(\"userId\", userId);\r\n    sessionStorage.setItem(\"isLoggedIn\", isLoggedIn);\r\n    return response.data\r\n  } catch (ex) {\r\n    log(ex)\r\n    return null\r\n  }\r\n}\r\n\r\n\r\n/////////omkar fun ////\r\n\r\nexport async function getDoctorById(doctorId){\r\n  const url = createUrl(`/doctor/${doctorId}`)\r\n  debugger;\r\n\r\n  try {\r\n    const response = await axios.get(url)\r\n    log(response.data)\r\n    debugger; \r\n    return response.data\r\n  } catch (ex) {\r\n    log(ex)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function getAdminById(adminId){\r\n  const url = createUrl(`/admin/${adminId}`)\r\n  debugger;\r\n\r\n  try {\r\n    const response = await axios.get(url)\r\n    log(response.data)\r\n    debugger; \r\n    return response.data\r\n  } catch (ex) {\r\n    log(ex)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function getAllPatients(){\r\n  const url = createUrl(`/patient`)\r\n  debugger;\r\n\r\n  try {\r\n    const response = await axios.get(url)\r\n    log(response.data)\r\n    debugger; \r\n    return response.data\r\n  } catch (ex) {\r\n    log(ex)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function updateStatusOfPatient(patientId){\r\n  const url = createUrl(`/patient/status/patientId/${patientId}`)\r\n  debugger;\r\n\r\n  try {\r\n    const response = await axios.put(url)\r\n    log(response.data)\r\n    if(response.data)\r\n    {\r\n       // ShowMessage(\"Record Updated!\");\r\n       debugger;\r\n       console.log(\"hi\");\r\n        toast.success(\"Patient Deleted Successfully\");\r\n        \r\n        \r\n\r\n    }\r\n     else\r\n     {\r\n      toast.error(\"An error occurred during getting response \");\r\n     }\r\n  } catch (ex) {\r\n    log(ex)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function registerDoctor(doctor) {\r\n  const url = createUrl('/doctor/register');\r\n  // const body = {\r\n  //   doctor\r\n  // };\r\n\r\n  try {\r\n   \r\n    debugger;\r\n    const response = await axios.post(url, doctor);\r\n    log(response.data);\r\n    return response.data;\r\n  } catch (ex) {\r\n    log('Error registering user:', ex);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function updateStatusOfDoctors(doctorId) {\r\n  const url = createUrl(`/doctor/${doctorId}`)\r\n  debugger;\r\n\r\n  try {\r\n    const response = await axios.put(url)\r\n    log(response.data)\r\n    if (response.data ) {\r\n      // ShowMessage(\"Record Updated!\");\r\n      debugger;\r\n      console.log(\"hi\");\r\n      toast.success(\"Doctor Removed Successfully\");\r\n\r\n\r\n\r\n    }\r\n    else {\r\n      toast.error(\"An error occurred during getting response \");\r\n    }\r\n  } catch (ex) {\r\n    log(ex)\r\n    return null\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,GAAG,QAAQ,gBAAgB;AAC/C,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,OAAO,eAAeC,YAAYA,CAChCC,IAAI,EACJC,KAAK,EACLC,QAAQ,EACRC,SAAS,EACTC,GAAG,EACHC,UAAU,EACVC,OAAO,EACPC,IAAI,EACJ;EACA,MAAMC,GAAG,GAAGZ,SAAS,CAAC,mBAAmB,CAAC;EAC1C,MAAMa,IAAI,GAAG;IACXT,IAAI;IACJC,KAAK;IACLC,QAAQ;IACRC,SAAS;IACTC,GAAG;IACHC,UAAU;IACVC,OAAO;IACPC;EACF,CAAC;EAED,IAAI;IACH;IACC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA,MAAMG,QAAQ,GAAG,MAAMf,KAAK,CAACgB,IAAI,CAACH,GAAG,EAAEC,IAAI,CAAC;IAC5CZ,GAAG,CAACa,QAAQ,CAACE,IAAI,CAAC;IAClB,OAAOF,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,EAAE,EAAE;IACXhB,GAAG,CAAC,yBAAyB,EAAEgB,EAAE,CAAC;IAClC,OAAO,IAAI;EACb;AACF;AAEA,OAAO,eAAeC,SAASA,CAACb,KAAK,EAAEC,QAAQ,EAAE;EAC/C;EACA,MAAMM,GAAG,GAAGZ,SAAS,CAAC,qBAAqB,CAAC;EAC5C,MAAMa,IAAI,GAAG;IACXR,KAAK;IACLC;EACF,CAAC;;EAED;EACA,IAAI;IACF,MAAMQ,QAAQ,GAAG,MAAMf,KAAK,CAACgB,IAAI,CAACH,GAAG,EAAEC,IAAI,CAAC;IAC5CZ,GAAG,CAACa,QAAQ,CAACE,IAAI,CAAC;IAClB;IACA,MAAMG,KAAK,GAAGL,QAAQ,CAACE,IAAI,CAACI,GAAG;IAC/B,MAAMC,SAAS,GAAGP,QAAQ,CAACE,IAAI,CAACK,SAAS;IACzC,MAAMC,MAAM,GAAGR,QAAQ,CAACE,IAAI,CAACM,MAAM;IACnC,MAAMC,UAAU,GAAGT,QAAQ,CAACE,IAAI,CAACO,UAAU,CAAC,CAAC;;IAE7C;IACAC,cAAc,CAACC,OAAO,CAAC,OAAO,EAAGN,KAAK,CAAC;IACvCK,cAAc,CAACC,OAAO,CAAC,WAAW,EAAEJ,SAAS,CAAC;IAC9CG,cAAc,CAACC,OAAO,CAAC,QAAQ,EAAEH,MAAM,CAAC;IACxCE,cAAc,CAACC,OAAO,CAAC,YAAY,EAAEF,UAAU,CAAC;IAChDG,OAAO,CAACzB,GAAG,CAACuB,cAAc,CAACG,OAAO,CAAC,QAAQ,CAAC,CAAC;IAC7C,OAAOb,QAAQ;EACjB,CAAC,CAAC,OAAOG,EAAE,EAAE;IACXhB,GAAG,CAACgB,EAAE,CAAC;IACP,OAAO,IAAI;EACb;AACF;AAEA,OAAO,eAAeW,cAAcA,CAACC,SAAS,EAAC;EAE7C,MAAMjB,GAAG,GAAGZ,SAAS,CAAE,YAAW6B,SAAU,EAAC,CAAC;EAChD;EACE;EACA;EACA;EACA;EACA,IAAI;IACF,MAAMf,QAAQ,GAAG,MAAMf,KAAK,CAAC+B,GAAG,CAAClB,GAAG,CAAC;IACrCX,GAAG,CAACa,QAAQ,CAACE,IAAI,CAAC;IAClB;IACA,MAAMG,KAAK,GAAGL,QAAQ,CAACE,IAAI,CAACV,QAAQ;IACpC,MAAMe,SAAS,GAAGP,QAAQ,CAACE,IAAI,CAACL,IAAI;IACpC,MAAMW,MAAM,GAAGR,QAAQ,CAACE,IAAI,CAACM,MAAM;IACnC,MAAMC,UAAU,GAAG,IAAI,CAAC;;IAExBC,cAAc,CAACC,OAAO,CAAC,OAAO,EAAGN,KAAK,CAAC;IACvCK,cAAc,CAACC,OAAO,CAAC,WAAW,EAACJ,SAAS,CAAC;IAC7CG,cAAc,CAACC,OAAO,CAAC,QAAQ,EAAEH,MAAM,CAAC;IACxCE,cAAc,CAACC,OAAO,CAAC,YAAY,EAAEF,UAAU,CAAC;IAChD,OAAOT,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,EAAE,EAAE;IACXhB,GAAG,CAACgB,EAAE,CAAC;IACP,OAAO,IAAI;EACb;AACF;;AAGA;;AAEA,OAAO,eAAec,aAAaA,CAACC,QAAQ,EAAC;EAC3C,MAAMpB,GAAG,GAAGZ,SAAS,CAAE,WAAUgC,QAAS,EAAC,CAAC;EAC5C;EAEA,IAAI;IACF,MAAMlB,QAAQ,GAAG,MAAMf,KAAK,CAAC+B,GAAG,CAAClB,GAAG,CAAC;IACrCX,GAAG,CAACa,QAAQ,CAACE,IAAI,CAAC;IAClB;IACA,OAAOF,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,EAAE,EAAE;IACXhB,GAAG,CAACgB,EAAE,CAAC;IACP,OAAO,IAAI;EACb;AACF;AAEA,OAAO,eAAegB,YAAYA,CAACC,OAAO,EAAC;EACzC,MAAMtB,GAAG,GAAGZ,SAAS,CAAE,UAASkC,OAAQ,EAAC,CAAC;EAC1C;EAEA,IAAI;IACF,MAAMpB,QAAQ,GAAG,MAAMf,KAAK,CAAC+B,GAAG,CAAClB,GAAG,CAAC;IACrCX,GAAG,CAACa,QAAQ,CAACE,IAAI,CAAC;IAClB;IACA,OAAOF,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,EAAE,EAAE;IACXhB,GAAG,CAACgB,EAAE,CAAC;IACP,OAAO,IAAI;EACb;AACF;AAEA,OAAO,eAAekB,cAAcA,CAAA,EAAE;EACpC,MAAMvB,GAAG,GAAGZ,SAAS,CAAE,UAAS,CAAC;EACjC;EAEA,IAAI;IACF,MAAMc,QAAQ,GAAG,MAAMf,KAAK,CAAC+B,GAAG,CAAClB,GAAG,CAAC;IACrCX,GAAG,CAACa,QAAQ,CAACE,IAAI,CAAC;IAClB;IACA,OAAOF,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,EAAE,EAAE;IACXhB,GAAG,CAACgB,EAAE,CAAC;IACP,OAAO,IAAI;EACb;AACF;AAEA,OAAO,eAAemB,qBAAqBA,CAACP,SAAS,EAAC;EACpD,MAAMjB,GAAG,GAAGZ,SAAS,CAAE,6BAA4B6B,SAAU,EAAC,CAAC;EAC/D;EAEA,IAAI;IACF,MAAMf,QAAQ,GAAG,MAAMf,KAAK,CAACsC,GAAG,CAACzB,GAAG,CAAC;IACrCX,GAAG,CAACa,QAAQ,CAACE,IAAI,CAAC;IAClB,IAAGF,QAAQ,CAACE,IAAI,EAChB;MACG;MACA;MACAU,OAAO,CAACzB,GAAG,CAAC,IAAI,CAAC;MAChBC,KAAK,CAACoC,OAAO,CAAC,8BAA8B,CAAC;IAIjD,CAAC,MAEA;MACCpC,KAAK,CAACqC,KAAK,CAAC,4CAA4C,CAAC;IAC1D;EACH,CAAC,CAAC,OAAOtB,EAAE,EAAE;IACXhB,GAAG,CAACgB,EAAE,CAAC;IACP,OAAO,IAAI;EACb;AACF;AAEA,OAAO,eAAeuB,cAAcA,CAACC,MAAM,EAAE;EAC3C,MAAM7B,GAAG,GAAGZ,SAAS,CAAC,kBAAkB,CAAC;EACzC;EACA;EACA;;EAEA,IAAI;IAEF;IACA,MAAMc,QAAQ,GAAG,MAAMf,KAAK,CAACgB,IAAI,CAACH,GAAG,EAAE6B,MAAM,CAAC;IAC9CxC,GAAG,CAACa,QAAQ,CAACE,IAAI,CAAC;IAClB,OAAOF,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,EAAE,EAAE;IACXhB,GAAG,CAAC,yBAAyB,EAAEgB,EAAE,CAAC;IAClC,OAAO,IAAI;EACb;AACF;AAEA,OAAO,eAAeyB,qBAAqBA,CAACV,QAAQ,EAAE;EACpD,MAAMpB,GAAG,GAAGZ,SAAS,CAAE,WAAUgC,QAAS,EAAC,CAAC;EAC5C;EAEA,IAAI;IACF,MAAMlB,QAAQ,GAAG,MAAMf,KAAK,CAACsC,GAAG,CAACzB,GAAG,CAAC;IACrCX,GAAG,CAACa,QAAQ,CAACE,IAAI,CAAC;IAClB,IAAIF,QAAQ,CAACE,IAAI,EAAG;MAClB;MACA;MACAU,OAAO,CAACzB,GAAG,CAAC,IAAI,CAAC;MACjBC,KAAK,CAACoC,OAAO,CAAC,6BAA6B,CAAC;IAI9C,CAAC,MACI;MACHpC,KAAK,CAACqC,KAAK,CAAC,4CAA4C,CAAC;IAC3D;EACF,CAAC,CAAC,OAAOtB,EAAE,EAAE;IACXhB,GAAG,CAACgB,EAAE,CAAC;IACP,OAAO,IAAI;EACb;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}